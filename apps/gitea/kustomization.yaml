apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: gitea
resources:
  - ingress.yaml
  - gitea-secrets.yaml
helmCharts:
  - name: gitea
    repo: https://dl.gitea.com/charts
    version: v10.4.1
    releaseName: gitea
    namespace: gitea
    valuesMerge: merge
    valuesInline:
      gitea:
        admin:
          existingSecret: gitea-secrets
        config:
          database:
            DB_TYPE: postgres
          indexer:
            INDEXER_TYPE: bleve
            REPO_INDEXER_ENABLED: true
          server:
            DOMAIN: kalmyk.duckdns.org
            ROOT_URL: https://kalmyk.duckdns.org
            SSH_DOMAIN: kalmyk.duckdns.org
      redis-cluster:
        enabled: false
      redis:
        enabled: true
      postgresql-ha:
        enabled: false
      postgresql:
        enabled: true
