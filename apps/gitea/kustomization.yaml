apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: gitea
resources:
  - namespace.yaml
  - ingress.yaml
helmCharts:
  - name: gitea
    repo: https://dl.gitea.com/charts/
    releaseName: gitea
    namespace: gitea
    valuesMerge: merge
    valuesInline:
      additionalConfigFromEnvs:
        - name: GITEA__SERVER__DOMAIN
          value: gitea.proompteng.ai
        - name: GITEA__SERVER__ROOT_URL
          value: http://gitea.proompteng.ai
        - name: GITEA__SERVER__SSH_DOMAIN
          value: gitea.proompteng.ai
      ingress:
        apiVersion: networking.k8s.io/v1
        enabled: true
        className: traefik-lb
        hosts:
          - host: gitea.proompteng.ai
            paths:
              - path: /
                pathType: Prefix
