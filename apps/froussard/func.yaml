# $schema: https://raw.githubusercontent.com/knative/func/d04ff0a3/schema/func_yaml-schema.json
# yaml-language-server: $schema=https://raw.githubusercontent.com/knative/func/d04ff0a3/schema/func_yaml-schema.json
specVersion: 1.17.0
name: froussard
runtime: typescript
registry: registry.ide-newton.ts.net/lab
namespace: froussard
created: 2025-03-30T10:30:06.936905-07:00
build:
  builderImages:
    platforms: linux/arm64
    s2i: registry.ide-newton.ts.net/lab/baozi
  builder: s2i
run:
  envs:
  - name: GITHUB_WEBHOOK_SECRET
    value: '{{ secret:github-secret:webhook-secret }}'
  - name: KAFKA_BROKERS
    value: kafka-kafka-bootstrap.kafka:9092
  - name: KAFKA_TOPIC
    value: github.webhook.events
  - name: KAFKA_CODEX_TOPIC
    value: github.codex.tasks
  - name: KAFKA_USERNAME
    value: '{{ secret:froussard-kafka:username }}'
  - name: KAFKA_PASSWORD
    value: '{{ secret:froussard-kafka:password }}'
  - name: KAFKAJS_NO_PARTITIONER_WARNING
    value: "1"
  - name: GITHUB_TOKEN
    value: '{{ secret:github-token:token }}'
deploy:
  namespace: froussard
  image: registry.ide-newton.ts.net/lab/froussard@sha256:3e6baeb7d1aac42596215cdb659d8c50ca1b1420c3d224b6ebf9ec65c52c6506
  annotations:
    serving.knative.dev/revision-history-limit: "3"
  options:
    scale:
      min: 1
