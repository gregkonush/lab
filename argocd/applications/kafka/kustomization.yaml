apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - application.yaml
  - load-balancer.yaml
  - kafbat-ui-access-kafka.yaml
helmCharts:
  - name: kafka-ui
    repo: https://kafbat.github.io/helm-charts
    version: 1.5.1
    releaseName: kafka-ui
    namespace: kafka
    valuesInline:
      envs:
        secretMappings:
          KAFKA_PASSWORD:
            name: kafka-user-passwords
            keyName: client-passwords
      env:
        - name: KAFKA_CLUSTERS_0_NAME
          value: kafka
        - name: KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS
          value: kafka:9092
        - name: KAFKA_CLUSTERS_0_PROPERTIES_SECURITY_PROTOCOL
          value: SASL_PLAINTEXT
        - name: KAFKA_CLUSTERS_0_PROPERTIES_SASL_MECHANISM
          value: SCRAM-SHA-512
        - name: KAFKA_CLUSTERS_0_PROPERTIES_SASL_JAAS_CONFIG
          value: 'org.apache.kafka.common.security.scram.ScramLoginModule required username="user1" password="$(KAFKA_PASSWORD)";'
      yamlApplicationConfig:
        auth:
          type: disabled
        management:
          health:
            ldap:
              enabled: false
