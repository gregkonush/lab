apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: milvus

resources:
  - external-service.yaml
  - milvus-kafka-sasl-secret.yaml

helmCharts:
  - name: milvus
    repo: https://zilliztech.github.io/milvus-helm
    version: 5.0.0
    releaseName: milvus
    namespace: milvus
    valuesInline:
      kafka:
        enabled: false
        external:
          enabled: true
          brokers:
            - kafka.kafka.svc.cluster.local:9092
          sasl:
            enabled: true
            mechanism: scram-sha-512
            username: user1
            passwordFromExistingSecret:
              name: milvus-kafka-sasl
              key: password
