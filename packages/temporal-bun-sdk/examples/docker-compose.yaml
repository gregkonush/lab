version: '3.9'

services:
  temporal:
    image: temporalio/auto-setup:1.23.0
    container_name: temporal-dev
    environment:
      - TEMPORAL_DEFAULT_NAMESPACE=default
    ports:
      - '7233:7233'
      - '7234:7234'
      - '7235:7235'
      - '7236:7236'

  worker:
    build:
      context: ../..
      dockerfile: packages/temporal-bun-sdk/Dockerfile
    environment:
      - TEMPORAL_ADDRESS=temporal:7233
      - TEMPORAL_NAMESPACE=default
      - TEMPORAL_TASK_QUEUE=prix
    depends_on:
      - temporal
    restart: unless-stopped
